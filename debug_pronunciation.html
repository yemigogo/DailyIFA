<!DOCTYPE html>
<html>
<head>
    <title>Debug Pronunciation</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .word { 
            display: inline-block; 
            margin: 5px; 
            padding: 8px 12px;
            background: #10b981; 
            color: white; 
            border-radius: 4px; 
            cursor: pointer;
            transition: all 0.2s;
        }
        .word:hover { 
            background: #059669; 
            transform: scale(1.05);
        }
        .result { 
            margin: 10px 0; 
            padding: 10px; 
            background: #f3f4f6; 
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Debug Yoruba Pronunciation</h1>
    
    <div>
        <span class="word" onclick="testWord('á¹£Ã ngÃ³')">á¹£Ã ngÃ³ ğŸ”Š</span>
        <span class="word" onclick="testWord('Ã²rÃ¬á¹£Ã ')">Ã²rÃ¬á¹£Ã  ğŸ”Š</span>
        <span class="word" onclick="testWord('Ã á¹£áº¹')">Ã á¹£áº¹ ğŸ”Š</span>
        <span class="word" onclick="testWord('á»Ì€á¹£un')">á»Ì€á¹£un ğŸ”Š</span>
        <span class="word" onclick="testWord('á»Ì€rÃºnmÃ¬lÃ ')">á»Ì€rÃºnmÃ¬lÃ  ğŸ”Š</span>
        <span class="word" onclick="testWord('yemá»ja')">yemá»ja ğŸ”Š</span>
        <span class="word" onclick="testWord('ifÃ¡')">ifÃ¡ ğŸ”Š</span>
    </div>
    
    <div id="debug"></div>

    <script>
        let currentAudio = null;
        
        function testWord(word) {
            const debug = document.getElementById('debug');
            
            // Direct mapping like in the React component
            const knownFiles = {
                'á¹£Ã ngÃ³': 'sango.mp3',
                'sango': 'sango.mp3',
                'Ã²rÃ¬á¹£Ã ': 'orisa.mp3',
                'orisa': 'orisa.mp3',
                'Ã á¹£áº¹': 'ase.mp3',
                'ase': 'ase.mp3',
                'á»Ì€á¹£un': 'osun.mp3',
                'osun': 'osun.mp3',
                'á»Ì€rÃºnmÃ¬lÃ ': 'orunmila.mp3',
                'orunmila': 'orunmila.mp3',
                'yemá»ja': 'yemoja.mp3',
                'yemoja': 'yemoja.mp3',
                'ifÃ¡': 'ifa.mp3',
                'ifa': 'ifa.mp3'
            };
            
            const filename = knownFiles[word.toLowerCase()];
            
            if (!filename) {
                debug.innerHTML = `<div class="result">âŒ No mapping for: ${word}</div>`;
                return;
            }
            
            const audioPath = `/static/audio/pronunciation/${filename}`;
            debug.innerHTML = `<div class="result">ğŸ”„ Testing: ${word} -> ${audioPath}</div>`;
            
            // Stop current audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            // Test file access first
            fetch(audioPath, { method: 'HEAD' })
                .then(response => {
                    if (response.ok) {
                        debug.innerHTML += `<div class="result">âœ… File accessible: ${filename}</div>`;
                        
                        // Try to play
                        currentAudio = new Audio(audioPath);
                        currentAudio.volume = 0.9;
                        currentAudio.playbackRate = 0.9;
                        
                        currentAudio.onloadstart = () => {
                            debug.innerHTML += `<div class="result">ğŸ“¡ Loading audio...</div>`;
                        };
                        
                        currentAudio.oncanplaythrough = () => {
                            debug.innerHTML += `<div class="result">ğŸµ Audio ready</div>`;
                        };
                        
                        currentAudio.onplay = () => {
                            debug.innerHTML += `<div class="result">ğŸ”Š Playing: ${word}</div>`;
                        };
                        
                        currentAudio.onended = () => {
                            debug.innerHTML += `<div class="result">âœ… Playback completed</div>`;
                        };
                        
                        currentAudio.onerror = (e) => {
                            debug.innerHTML += `<div class="result">âŒ Audio error: ${e.message || 'Unknown error'}</div>`;
                        };
                        
                        return currentAudio.play();
                    } else {
                        debug.innerHTML += `<div class="result">âŒ File not accessible: ${response.status}</div>`;
                    }
                })
                .catch(error => {
                    debug.innerHTML += `<div class="result">âŒ Network error: ${error.message}</div>`;
                });
        }
    </script>
</body>
</html>