<!DOCTYPE html>
<html>
<head>
    <title>Direct Audio Test</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .test-btn { background: #059669; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        .test-btn:hover { background: #047857; }
        .result { margin: 10px 0; padding: 10px; border-radius: 4px; background: #f3f4f6; }
    </style>
</head>
<body>
    <h1>Direct Audio Test</h1>
    
    <div>
        <button class="test-btn" onclick="testAudio('sango.mp3', '·π£√†ng√≥')">Test ·π£√†ng√≥</button>
        <button class="test-btn" onclick="testAudio('orisa.mp3', '√≤r√¨·π£√†')">Test √≤r√¨·π£√†</button>
        <button class="test-btn" onclick="testAudio('ase.mp3', '√†·π£·∫π')">Test √†·π£·∫π</button>
        <button class="test-btn" onclick="testAudio('osun.mp3', '·ªçÃÄ·π£un')">Test ·ªçÃÄ·π£un</button>
        <button class="test-btn" onclick="testAudio('orunmila.mp3', '·ªçÃÄr√∫nm√¨l√†')">Test ·ªçÃÄr√∫nm√¨l√†</button>
    </div>
    
    <div id="result"></div>

    <script>
        let currentAudio = null;
        
        async function testAudio(filename, word) {
            const result = document.getElementById('result');
            const url = `/static/audio/pronunciation/${filename}`;
            
            try {
                // Stop current audio
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio = null;
                }
                
                result.innerHTML = `Testing: ${word} (${filename})...`;
                
                // Test file accessibility
                const response = await fetch(url, { method: 'HEAD' });
                
                if (!response.ok) {
                    result.innerHTML = `‚ùå File not accessible: ${filename} (${response.status})`;
                    return;
                }
                
                // Try to play
                currentAudio = new Audio(url);
                currentAudio.volume = 0.9;
                currentAudio.playbackRate = 0.9;
                
                currentAudio.onloadstart = () => {
                    result.innerHTML = `üîÑ Loading ${word}...`;
                };
                
                currentAudio.oncanplaythrough = () => {
                    result.innerHTML = `‚úÖ Ready to play: ${word}`;
                };
                
                currentAudio.onplay = () => {
                    result.innerHTML = `üîä Playing: ${word} (${filename})`;
                };
                
                currentAudio.onended = () => {
                    result.innerHTML = `‚úÖ Completed: ${word}`;
                };
                
                currentAudio.onerror = (e) => {
                    result.innerHTML = `‚ùå Playback error for ${word}: ${e.message || 'Unknown error'}`;
                };
                
                await currentAudio.play();
                
            } catch (error) {
                result.innerHTML = `‚ùå Error testing ${word}: ${error.message}`;
            }
        }
    </script>
</body>
</html>